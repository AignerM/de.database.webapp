@model de.database.webapp.Models.Search

@{
    ViewBag.Title = "Kunde";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    

</head>

<body>
    <h2>Kundensuche</h2>
    <br />
    <br />
    <div class="form-inline">
        <form action="./GetKunde" method="post">
            <label for="customer">Kundenname: </label>
            <input type="text" class="input-sm" name="customer" placholder="Kundename..." value="" id="customer" />
            <button class="btn" type="submit" style="background-color:#222222;color:white">Suchen</button>
        </form>
    </div>
    <br />
    <br />
    
        <table class="table-hover col-sm-12 table-striped">
            @{
                if (Model != null)
                {
                    string link;
                    <tr><td>Firmen Name</td><td>Adresse</td><td>PLZ</td><td>Stadt</td><td>Kontakt Name</td><td>Kunden ID</td><td>Aktionen</td></tr>
                    foreach (var customer in Model.SearchResultCustomer)
                    {
                        link = "/home/GetOrders?id=" + customer.CustomerID.ToString();
                        <tr>
                            <td>@customer.CompanyName</td> 
                            <td>@customer.Address</td>
                            <td>@customer.PostalCode</td>
                            <td>@customer.City</td>
                            <td>@customer.ContactName</td>
                            <td id="customerID">@customer.CustomerID</td>
                            <td><a href=@link>Bestellungen</a></td>
                        </tr>
                    }
                }
            }
        </table>

    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        function getCustomerID(){
            $.ajax({
                type:"post",
                dataType:"json",
                url:"/Home/GetOrders",
                data:{
                    customerID: document.getElementById("customer")
                }
            });
        }
    </script>
</body>

